id:
name: GitOps.PullRequestIssueManagement
description: GitOps.PullRequestIssueManagement primitive
owner:
resource: repository
disabled: false
where:
configuration:
  resourceManagementConfiguration:
    eventResponderTasks:
      - if:
          - payloadType: Pull_Request
          - filesMatchPattern:
              pattern: DevOpsPipelineDefinitions/*
          - or:
              - activitySenderHasPermission:
                  permission: Read
              - activitySenderHasPermission:
                  permission: None
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                Sorry we cannot process ${number} because you are changing validation-pipeline.yaml. Please remove that file from your PR. If you would like to discuss changes to validation-pipeline.yml, please file an issue.


                Template: msftbot/pipelineModified
          - assignTo:
              users:
                - PR Author
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: PullRequest-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The package manager bot determined there was an issue with the pull request. Make sure the manifest files are under the manifests\partition\publisher\appname\version directory and only one package version is being modified in your PR. The partition of the path must be the first letter of the publisher in lower-case.


                Example:

                Path: manifests / m / Microsoft / WindowsTerminal / 1.6.10571.0 / WindowsTerminal.yaml


                For details on the error, see the details link below in the build pipeline.


                You may also try the [Windows Package Manager Manifest Creator](https://github.com/microsoft/winget-create)


                Template: msftbot/validationError/pullRequest
          - assignTo:
              users:
                - PR Author
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - isAction:
              action: Opened
        then:
          - addCodeFlowLink
        description:
      - if:
          - payloadType: Pull_Request_Review
          - isAction:
              action: Submitted
          - isReviewState:
              reviewState: Changes_requested
        then:
          - addLabel:
              label: Needs-Author-Feedback
          - assignTo:
              author: True
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The package manager bot determined changes have been requested to your PR.


                Template: msftbot/changesRequested
        description:
      - if:
          - payloadType: Issue_Comment
          - isActivitySender:
              issueAuthor: True
          - hasLabel:
              label: Needs-Author-Feedback
          - not:
              isAction:
                action: Synchronize
        then:
          - removeLabel:
              label: Needs-Author-Feedback
          - addLabel:
              label: Needs-Attention
        description:
      - if:
          - payloadType: Pull_Request_Review
          - isActivitySender:
              issueAuthor: True
          - hasLabel:
              label: Needs-Author-Feedback
          - not:
              isAction:
                action: Synchronize
        then:
          - removeLabel:
              label: Needs-Author-Feedback
          - addLabel:
              label: Needs-Attention
        description:
      - if:
          - payloadType: Pull_Request
          - not:
              isAction:
                action: Closed
          - hasLabel:
              label: No-Recent-Activity
        then:
          - removeLabel:
              label: No-Recent-Activity
        description:
      - if:
          - payloadType: Issue_Comment
          - hasLabel:
              label: No-Recent-Activity
        then:
          - removeLabel:
              label: No-Recent-Activity
        description:
      - if:
          - payloadType: Pull_Request
          - hasLabel:
              label: Validation-Completed
        then:
          - enableAutoMerge:
              mergeMethod: Squash
        description:
      - if:
          - payloadType: Pull_Request
          - labelRemoved:
              label: Validation-Completed
        then:
          - disableAutoMerge
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                An issue was identified during the manual review, and the PR request cannot be approved. Please see comments for more information.

                Please address the issue and resubmit, or if you disagree with this resolution, please raise an issue and flag this PR for further discussion.


                Template: msftbot/validationError/manualReview
          - assignTo:
              author: True
          - requestReview:
              reviewer: PR Author
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Uninstall-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The package manager bot detected that the application did not uninstall correctly. Please make sure the SystemAppId is correct and the application uninstalls correctly. Once repaired, please push an update to your pull request.


                Template: msftbot/validationError/uninstall
          - assignTo:
              users:
                - PR Author
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Virus-Scan-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The package manager bot the installation failed a virus scan. Please check the application installs correctly and there are not viruses associated with the tool. Once repaired, please push an update to your pull request.


                Template: msftbot/validationError/installers/virusScan
          - assignTo:
              users:
                - PR Author
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Installation-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The package manager bot determined there was an issue with installing the application correctly. Please check the application installs correctly. Once repaired, please push an update to your pull request.


                Template: msftbot/validationError/installation/general
          - assignTo:
              users:
                - PR Author
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - and:
                  - hasLabel:
                      label: Validation-Completed
                  - labelAdded:
                      label: Moderator-Approved
              - and:
                  - labelAdded:
                      label: Validation-Completed
                  - hasLabel:
                      label: Moderator-Approved
          - isOpen
          - and:
              - not:
                  hasLabel:
                    label: Blocking-Issue
              - not:
                  hasLabel:
                    label: Needs-Author-Feedback
              - not:
                  hasLabel:
                    label: Needs-Attention
        then:
          - approvePullRequest:
              comment: ""
          - addReply:
              reply: >-
                Hello ${issueAuthor},

                Validation has completed.


                Template: msftbot/validationCompleted
        description:
        triggerOnOwnActions: true
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-SmartScreen
        then:
          - assignTo:
              users:
                - KevinLaMS
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                During installation testing, this app triggered a Microsoft Defender SmartScreen error.


                We are notifying WDNotify@microsoft.com for investigation.


                Template: msftbot/validationError/smartScreen
          - addLabel:
              label: Needs-SmartScreen-Investigation
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Unattended-Failed
        then:
          - assignTo:
              author: True
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                During installation testing, this application failed to install without user input. Did you forget to add Silent or SilentWithProgress switches?


                This can also happen when a dependency is missing. You can test with https://github.com/microsoft/winget-pkgs#test-your-manifest.


                Please investigate a fix and resubmit the Pull Request.


                You may also try using the [Windows Package Manager Manifest Creator](https://github.com/microsoft/winget-create) to determine the proper installer type. If the installer type is MSIX, MSI, or a known installer technology like NullSoft, Inno, etc. the wingetcreate tool can detect them and the winget client will know what switches to pass. If it's a .exe installer of an unknown type, you will need to search to determine the proper switches for Silent and SilentWithProgress.


                Template: msftbot/validationError/installation/unattended
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Hash-Verification-Failed
              - labelAdded:
                  label: Error-Hash-Mismatch
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                I am sorry to report that the Sha256 Hash does not match the installer. This may be caused by using a vanity URL rather than a URL directly to the binary.


                Please check the HASH and submit again. Sorry for the inconvenience.


                Template: msftbot/validationError/installers/hashMismatch
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-MSIX-Dependency
        then:
          - assignTo:
              author: True
          - removeLabel:
              label: Azure-Pipeline-Passed
          - addLabel:
              label: Blocking-Issue
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                This package fails because it is dependent on some frameworks, and we do not support the dependencies yet. See issue: microsoft/winget-cli#163

                In the meantime, if you include the dependencies in your package, it should pass.


                Template: msftbot/blockingIssue/dependencySupport
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Install-Access-Denied
        then:
          - addLabel:
              label: Blocking-Issue
          - removeLabel:
              label: Azure-Pipeline-Passed
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                I am sorry this submission is failing due to an in issue on the client. The issue is "Access Denied when installing an app #247"


                The developers have been notified. We will keep this PR request open until the issue is addressed.


                Template: msftbot/blockingIssue/accessDeniedError
          - removeLabel:
              label: Needs-Attention
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[bB]locking[\s-][iI]ssue'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Blocking-Issue
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[bB]locking[\s-][iI]ssue'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - removeLabel:
              label: Needs-Author-Feedback
          - addLabel:
              label: Blocking-Issue
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[dD]ependencies'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Dependencies
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[dD]ependencies'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Dependencies
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[aA]rea[\s-][eE]xternal'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Area-External
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[iI]nstaller[\s-][iI]ssue'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Installer-Issue
          - addLabel:
              label: Area-External
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[iI]nstaller[\s-][iI]ssue'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Installer-Issue
          - addLabel:
              label: Area-External
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[aA]rea[\s-][eE]xternal'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Area-External
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[iI]nteractive[\s-][oO]nly([\s-][iI]nstaller)?'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Interactive-Only-Installer
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[iI]nteractive[\s-][oO]nly([\s-][iI]nstaller)?'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Interactive-Only-Installer
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: Duplicate\s+of\s+\#?\s*\d+
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                We've identified this issue as a duplicate of another one that already exists on this Issue Tracker. This specific instance is being closed in favor of tracking the concern over on the referenced thread. Please add your 👍 to the other issue to raise its priority. Thanks for your report!


                Template: msftbot/duplicate/closed
          - closeIssue
          - removeLabel:
              label: Needs-Triage
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: Needs-Feedback-Hub
          - removeLabel:
              label: Needs-Author-Feedback
          - addLabel:
              label: Resolution-Duplicate
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[rR]eset\s+[fF]eedback'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - removeLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: Moderator-Approved
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: "[cC]lose\\s+[wW]ith\\s+[rR]eason\\s*:[\\w\\s\\-\\(\\)\\[\\]\\{\\}\\\\\\/.+=@\\#$%&^*`~|'\",<>?]*(?=;)"
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - closeIssue
          - removeLabel:
              label: Needs-Triage
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: Needs-Feedback-Hub
          - removeLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issues
          - commentContains:
              pattern: Close\s+with\s+reason\s*:[\w\s\-\(\)\[\]\{\}\\\/.+=@\#$%&^*`~|'",<>?]*(?=;)
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - closeIssue
          - removeLabel:
              label: Needs-Triage
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: Needs-Feedback-Hub
          - removeLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[zZ]ip[\s-][bB]inary'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: zip-binary
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[zZ]ip[\s-][bB]inary'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: zip-binary
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[Nn]eeds[\s-][Aa]ttention'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Needs-Attention
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
          - addReply:
              reply: >-
                Hello ${issueAuthor},


                Your pull request requires attention from a repository administrator. It has been assigned to a developer for review.


                Template: msftbot/manualReview
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\[[Pp]olicy\]\s+[Nn]eeds[\s-][Cc][Ll][Aa]'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Needs-CLA
        description:
      - if:
          - payloadType: Issues
          - hasLabel:
              label: In-PR
          - hasLabel:
              label: Help-Wanted
          - isLabeled
        then:
          - removeLabel:
              label: Help-Wanted
        description:
      - if:
          - payloadType: Issues
          - isLabeled
          - hasLabel:
              label: Needs-Feedback-Hub
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                Please send us feedback with the [Feedback Hub](https://aka.ms/winget-feedback) with this issue and paste the link here so we can more easily find your crash information on the back end.<br /><br />

                Use "Apps" and "Windows Package Manager" for Category.<br /><br />

                The share link at the bottom of the report will provide the URL to paste into this Issue to help us locate it.


                Template: msftbot/feedbackHub
          - removeLabel:
              label: Needs-Feedback-Hub
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: '\/feedback'
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                Please send us feedback with the Feedback Hub with this issue and paste the link here so we can more easily find your crash information on the back end.<br /><br />

                Use "Apps" and "Windows Package Manager" for Category.<br /><br />

                The share link at the bottom of the report will provide the URL to paste into this Issue to help us locate it.


                Template: msftbot/feedbackHub
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issues
          - or:
              - and:
                  - isAction:
                      action: Opened
        then:
          - addLabel:
              label: Needs-Triage
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-VCRuntime-Dependency
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                This package fails because it is dependent on the Visual Studio Runtime and we do not support the dependencies yet. See issue: microsoft/winget-cli#163


                In the meantime, if you include the dependencies in your package, it should pass.

                https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads


                Template: msftbot/blockingIssue/dependencySupport
          - removeLabel:
              label: Azure-Pipeline-Passed
          - addLabel:
              label: Blocking-Issue
          - assignTo:
              author: True
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-404-Error
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                When processing this package, the URL to the installer returned a 404 error. It appears this URL is no longer valid.


                Please update the URL and Hash at your convenience.


                Template: msftbot/validationError/urls/404
          - removeLabel:
              label: Azure-Pipeline-Passed
          - assignTo:
              author: True
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Internal-Error
              - labelAdded:
                  label: Internal-Error-PR
              - labelAdded:
                  label: Internal-Error-Manifest
              - labelAdded:
                  label: Internal-Error-URL
              - labelAdded:
                  label: Internal-Error-Domain
              - labelAdded:
                  label: Internal-Error-Keyword-Policy
              - labelAdded:
                  label: Internal-Error-Static-Scan
              - labelAdded:
                  label: Internal-Error-Dynamic-Scan
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The pull request encountered an internal error and has been assigned to a developer to investigate.


                Template: msftbot/validationError/internalError
          - addLabel:
              label: Needs-Attention
        description:
      - if:
          - payloadType: Pull_Request
          - hasLabel:
              label: Timeout-Retry
          - hasLabel:
              label: Error-Analysis-Timeout
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                Static analysis has timed out. The PR has been assigned to a developer to investigate.


                Template: msftbot/validationError/staticAnalysis
          - addLabel:
              label: Needs-Attention
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Error-Installer-Availability
        then:
          - assignTo:
              users:
                - PR Author
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                When processing this package, the URL to the installer returned a 404 error or was determined to be invalid.


                Please update the URL and hash at your convenience and resubmit your PR.


                Template: msftbot/validationError/urls/404
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: Azure-Pipeline-Passed
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - not:
              filesMatchPattern:
                pattern: ^manifests/*
          - not:
              filesMatchPattern:
                pattern: DevOpsPipelineDefinitions
          - filesMatchPattern:
              pattern: ^.*\.yaml
        then:
          - assignTo:
              author: True
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                It looks like this pull request is missing the manifests folder. For example: manifests\<first letter of the publisher in lower-case>\<publisher>\<application>\<version>\*.yaml


                Please review the path of your manifest file and resubmit.


                Template: msftbot/validationError/manifest/missingManifestsFolder
          - addLabel:
              label: Manifest-Path-Error
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issue_Comment
          - or:
              - hasLabel:
                  label: No-Recent-Activity
        then:
          - removeLabel:
              label: No-Recent-Activity
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-HTTP-Error
        then:
          - assignTo:
              author: True
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The validation code has detected one of the URLs in the manifest is not using the HTTPS protocol. Please update all URLs in the manifest to use HTTPS instead.


                Template: msftbot/validationError/urls/https
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Indirect-URL
        then:
          - assignTo:
              users:
                - KevinLaMS
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Needs-Attention
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                This URL in this manifest is not a direct URL. It is using the actual URL as a parameter and passing that URL to a different website. This pattern is not supported. Please update the manifest to use a direct link for the URL.


                Template: msftbot/validationError/urls/indirect
          - addLabel:
              label: Needs-Author-Feedback
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: Publish\s+pipeline\s+succeeded
              isRegex: True
          - isActivitySender:
              user: wingetbot
              issueAuthor: False
        then:
          - addLabel:
              label: Publish-Pipeline-Succeeded
        description:
      - if:
          - payloadType: Pull_Request
          - isActivitySender:
              user: wingetbot
              issueAuthor: False
          - filesMatchPattern:
              pattern: DevOpsPipelineDefinitions/*
          - isOpen
        then:
          - approvePullRequest:
              comment: ""
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Merge-Conflict
        then:
          - removeLabel:
              label: Azure-Pipeline-Passed
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                The PR could not be validated because there is a merge conflict which adds bad characters to the manifest. Please address the merge conflict and resubmit.


                Template: msftbot/mergeConflict
          - removeLabel:
              label: Needs-Attention
          - addLabel:
              label: Needs-Author-Feedback
          - assignTo:
              author: True
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Internal-Error
              - labelAdded:
                  label: Internal-Error-PR
              - labelAdded:
                  label: Internal-Error-Manifest
              - labelAdded:
                  label: Internal-Error-URL
              - labelAdded:
                  label: Internal-Error-Static-Scan
              - labelAdded:
                  label: Internal-Error-Domain
              - labelAdded:
                  label: Internal-Error-Keyword-Policy
              - labelAdded:
                  label: Internal-Error-Dynamic-Scan
        then:
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - isAction:
                  action: Synchronize
        then:
          - removeLabel:
              label: Validation-Hash-Verification-Failed
          - removeLabel:
              label: Manifest-Version-Error
          - removeLabel:
              label: Manifest-Dependencies-Error
          - removeLabel:
              label: PullRequest-Error
          - removeLabel:
              label: Manifest-Validation-Error
          - removeLabel:
              label: Manifest-Installer-Validation-Error
          - removeLabel:
              label: URL-Validation-Error
          - removeLabel:
              label: Binary-Validation-Error
          - removeLabel:
              label: Error-Analysis-Timeout
          - removeLabel:
              label: Error-Installer-Availability
          - removeLabel:
              label: Error-Hash-Mismatch
          - removeLabel:
              label: Internal-Error
          - removeLabel:
              label: Internal-Error-PR
          - removeLabel:
              label: Internal-Error-Manifest
          - removeLabel:
              label: Internal-Error-URL
          - removeLabel:
              label: Internal-Error-Domain
          - removeLabel:
              label: Internal-Error-Keyword-Policy
          - removeLabel:
              label: Internal-Error-Static-Scan
          - removeLabel:
              label: Internal-Error-Dynamic-Scan
          - removeLabel:
              label: Validation-Installation-Error
          - removeLabel:
              label: Internal-Error-NoArchitectures
          - removeLabel:
              label: Internal-Error-NoSupportedArchitectures
          - removeLabel:
              label: Validation-Executable-Error
          - removeLabel:
              label: Validation-Defender-Error
          - removeLabel:
              label: Validation-Unapproved-URL
          - removeLabel:
              label: Validation-Domain
          - removeLabel:
              label: Blocking-Issue
          - removeLabel:
              label: Needs-SmartScreen-Investigation
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: EULA-Install
          - removeLabel:
              label: MSFT-Verified
          - removeLabel:
              label: Validation-Completed
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Validation-Unattended-Failed
          - removeLabel:
              label: Policy-Test-1.1.A
          - removeLabel:
              label: Policy-Test-1.1.B
          - removeLabel:
              label: Policy-Test-1.2
          - removeLabel:
              label: Policy-Test-1.5
          - removeLabel:
              label: Policy-Test-1.8
          - removeLabel:
              label: Policy-Test-2.10
          - removeLabel:
              label: Policy-Test-2.2.A
          - removeLabel:
              label: Policy-Test-2.2.B
          - removeLabel:
              label: Policy-Test-2.3
          - removeLabel:
              label: Policy-Test-2.4
          - removeLabel:
              label: Policy-Test-2.5
          - removeLabel:
              label: Policy-Test-2.6
          - removeLabel:
              label: Policy-Test-2.7
          - removeLabel:
              label: Policy-Test-2.8
          - removeLabel:
              label: Policy-Test-2.9
          - removeLabel:
              label: Validation-No-Executables
          - removeLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Moderator-Approved
          - removeLabel:
              label: Unexpected-File
          - removeLabel:
              label: Validation-Merge-Conflict
          - removeLabel:
              label: Manifest-AppsAndFeaturesVersion-Error
          - removeLabel:
              label: Validation-Shell-Execute
        description:
      - if:
          - payloadType: Issue_Comment
          - or:
              - commentContains:
                  pattern: '\/[a|A][z|Z][p|P] [r|R][u|U][n|N]'
                  isRegex: True
              - commentContains:
                  pattern: '\/[a|A][z|Z][u|U][r|R][e|E][p|P][i|I][p|P][e|E][l|L][i|I][n|N][e|E][s|S] [r|R][u|U][n|N]'
                  isRegex: True
          - not:
              isActivitySender:
                user: microsoft-github-policy-service[bot]
                issueAuthor: False
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
        then:
          - removeLabel:
              label: Validation-Hash-Verification-Failed
          - removeLabel:
              label: Validation-Merge-Conflict
          - removeLabel:
              label: PullRequest-Error
          - removeLabel:
              label: Manifest-Version-Error
          - removeLabel:
              label: Manifest-Dependencies-Error
          - removeLabel:
              label: Manifest-Validation-Error
          - removeLabel:
              label: Manifest-Installer-Validation-Error
          - removeLabel:
              label: URL-Validation-Error
          - removeLabel:
              label: Binary-Validation-Error
          - removeLabel:
              label: Error-Analysis-Timeout
          - removeLabel:
              label: Error-Installer-Availability
          - removeLabel:
              label: Error-Hash-Mismatch
          - removeLabel:
              label: Internal-Error
          - removeLabel:
              label: Internal-Error-PR
          - removeLabel:
              label: Internal-Error-Manifest
          - removeLabel:
              label: Internal-Error-URL
          - removeLabel:
              label: Internal-Error-Domain
          - removeLabel:
              label: Internal-Error-Keyword-Policy
          - removeLabel:
              label: Internal-Error-Static-Scan
          - removeLabel:
              label: Internal-Error-Dynamic-Scan
          - removeLabel:
              label: Validation-Installation-Error
          - removeLabel:
              label: Internal-Error-NoArchitectures
          - removeLabel:
              label: Internal-Error-NoSupportedArchitectures
          - removeLabel:
              label: Validation-Executable-Error
          - removeLabel:
              label: Validation-Defender-Error
          - removeLabel:
              label: Validation-Unapproved-URL
          - removeLabel:
              label: Validation-Domain
          - removeLabel:
              label: Blocking-Issue
          - removeLabel:
              label: Needs-SmartScreen-Investigation
          - removeLabel:
              label: Needs-Attention
          - removeLabel:
              label: EULA-Install
          - removeLabel:
              label: MSFT-Verified
          - removeLabel:
              label: Validation-Completed
          - removeLabel:
              label: Azure-Pipeline-Passed
          - removeLabel:
              label: Validation-Unattended-Failed
          - removeLabel:
              label: Policy-Test-1.1.A
          - removeLabel:
              label: Policy-Test-1.1.B
          - removeLabel:
              label: Policy-Test-1.2
          - removeLabel:
              label: Policy-Test-1.5
          - removeLabel:
              label: Policy-Test-1.8
          - removeLabel:
              label: Policy-Test-2.10
          - removeLabel:
              label: Policy-Test-2.2.A
          - removeLabel:
              label: Policy-Test-2.2.B
          - removeLabel:
              label: Policy-Test-2.3
          - removeLabel:
              label: Policy-Test-2.4
          - removeLabel:
              label: Policy-Test-2.5
          - removeLabel:
              label: Policy-Test-2.6
          - removeLabel:
              label: Policy-Test-2.7
          - removeLabel:
              label: Policy-Test-2.8
          - removeLabel:
              label: Policy-Test-2.9
          - removeLabel:
              label: Validation-No-Executables
          - removeLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Unexpected-File
          - removeLabel:
              label: Manifest-AppsAndFeaturesVersion-Error
          - removeLabel:
              label: Validation-Shell-Execute
        description:
      - if:
          - payloadType: Pull_Request
          - hasLabel:
              label: Internal-Error-Dynamic-Scan
          - not:
              hasLabel:
                label: Retry-1
        then:
          - addLabel:
              label: Retry-1
          - reopenIssue
        description:
      - if:
          - payloadType: Pull_Request_Review
          - isReviewState:
              reviewState: Approved
          - or:
              - isActivitySender:
                  user: jedieaston
                  issueAuthor: False
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
              - isActivitySender:
                  user: ItzLevvie
                  issueAuthor: False
              - isActivitySender:
                  user: OfficialEsco
                  issueAuthor: False
              - isActivitySender:
                  user: ImJoakim
                  issueAuthor: False
              - isActivitySender:
                  user: KaranKad
                  issueAuthor: False
              - isActivitySender:
                  user: quhxl
                  issueAuthor: False
              - isActivitySender:
                  user: Trenly
                  issueAuthor: False
              - isActivitySender:
                  user: mdanish-kh
                  issueAuthor: False
              - isActivitySender:
                  user: russellbanks
                  issueAuthor: False
        then:
          - addLabel:
              label: Moderator-Approved
        description:
      - if:
          - payloadType: Issues
          - isAction:
              action: Closed
        then:
          - removeLabel:
              label: Needs-Triage
        description:
      - if:
          - payloadType: Issue_Comment
          - commentContains:
              pattern: Duplicate\s+of\s+\#?\s*\d+
              isRegex: True
          - or:
              - activitySenderHasPermission:
                  permission: Admin
              - activitySenderHasPermission:
                  permission: Write
        then:
          - addReply:
              reply: >-
                Hello @${issueAuthor},


                We've identified this Issue as a duplicate of another one that already exists. This specific instance is being closed in favor of tracking the concern over on the referenced Issue. Thanks for your report! Be sure to add your 👍 to the issue to help raise the priority and avoid posting "Me too!" messages to respect those who have subscribed to the issue.


                Template: msftbot/duplicate/closed
          - removeLabel:
              label: Needs-Triage
          - addLabel:
              label: Resolution-Duplicate
          - removeLabel:
              label: "Needs: Attention"
          - removeLabel:
              label: Needs-Author-Feedback
          - removeLabel:
              label: Needs-Feedback-Hub
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Completed
          - not:
              hasLabel:
                label: Moderator-Approved
          - isOpen
        then:
          - addReply:
              reply: >-
                ${issueAuthor},


                The check-in policies require a moderator to approve PRs from the community.


                Our [moderators](https://github.com/microsoft/winget-pkgs/issues/15674#issue-908889039) are community volunteers, please be patient and allow them sufficient time to review your submission.


                Template: msftbot/requiresApproval/moderator
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Unapproved-URL
        then:
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Policy-Test-2.7
              - labelAdded:
                  label: Policy-Test-2.9
              - labelAdded:
                  label: Policy-Test-2.10
              - labelAdded:
                  label: Policy-Test-2.4
              - labelAdded:
                  label: Policy-Test-1.8
              - labelAdded:
                  label: Policy-Test-2.3
              - labelAdded:
                  label: Policy-Test-2.8
              - labelAdded:
                  label: Policy-Test-2.5
              - labelAdded:
                  label: Policy-Test-1.5
              - labelAdded:
                  label: Policy-Test-2.6
              - labelAdded:
                  label: Policy-Test-1.2
              - labelAdded:
                  label: Policy-Test-1.1.B
        then:
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - labelAdded:
                  label: Validation-Unattended-Failed
              - labelAdded:
                  label: Internal-Error-NoArchitectures
              - labelAdded:
                  label: Internal-Error-NoSupportedArchitectures
              - labelAdded:
                  label: Validation-Executable-Error
              - labelAdded:
                  label: Validation-Defender-Error
              - labelAdded:
                  label: Validation-No-Executables
        then:
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Metadata
          - activitySenderHasPermission:
              permission: Admin
        then:
          - approvePullRequest:
              comment: ""
          - addLabel:
              label: Validation-Completed
        description:
      - if:
          - payloadType: Pull_Request
          - or:
              - titleContains:
                  pattern: Estmob
                  isRegex: False
              - bodyContains:
                  pattern: Estmob
                  isRegex: False
              - titleContains:
                  pattern: SendAnywhere
                  isRegex: False
              - bodyContains:
                  pattern: SendAnywhere
                  isRegex: False
        then:
          - addLabel:
              label: Blocking-Issue
        description:
      - if:
          - payloadType: Pull_Request
          - labelAdded:
              label: Validation-Merge-Conflict
          - or:
              - activitySenderHasPermission:
                  permission: Write
              - activitySenderHasPermission:
                  permission: Admin
        then:
          - assignIcmUsers:
              teamId: 85579
              primary: True
              secondary: True
        description:
onFailure:
onSuccess:
