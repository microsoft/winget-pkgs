# Created with YamlCreate.ps1 Dumplings Mod
# yaml-language-server: $schema=https://aka.ms/winget-manifest.defaultLocale.1.12.0.schema.json

PackageIdentifier: PBH-BTN.PeerBanHelper
PackageVersion: 9.3.0
PackageLocale: zh-CN
Publisher: PBH-BTN Community
PublisherUrl: https://github.com/PBH-BTN
PublisherSupportUrl: https://github.com/PBH-BTN/PeerBanHelper/issues
PackageName: PeerBanHelper
PackageUrl: https://github.com/PBH-BTN/PeerBanHelper
License: GPL-3.0
LicenseUrl: https://github.com/PBH-BTN/PeerBanHelper/blob/HEAD/LICENSE
ShortDescription: 自动封禁不受欢迎、吸血和异常的 BT 客户端，并支持自定义规则。
Tags:
- bt
- 种子
ReleaseNotes: |-
  [!TIP]
  【Synology DSM】群晖用户请注意，由于原合作套件源矿神-SPK7 软件源计划停止服务，版本更新速度可能受影响且将在未来将关闭站点。请您添加 PBH-BTN SPK 源，以接替原矿神 SPK 源并继续通过套件中心获取更新：https://spk-repo.pbh-btn.com/nas 谢谢！
  [!NOTE]
  由于数据库基础设施的重大更改，请在升级时保留充足的磁盘空间，以便进行数据库升级。升级过程不可中断。
  重要修复
  - 修复在 Transmission 高版本（支持 PeerID 信息）上，Peer ID 值读取不正确的问题。这会影响反吸血模块的正常运行 @Ghost-chu
  新功能
  - 对 H2、MySQL、PostgreSQL（预览版）数据源支持 @Ghost-chu @Gaojianli @paulzzh @guohu7777
    - 针对信创和国产处理器架构设备，若 SQLite 无法在您的设备上运行，请考虑切换到 H2 或者 MySQL/PostgreSQL
    - Postgres 的支持是实验性的
  -【Synology DSM】新增 DSM 套件中心套件源，以接替正在关闭的矿神 SPK 源，以便继续通过套件中心提供更新 @Ghost-chu
  -【Linux/Debian】新增 Debian apt 软件包管理器源，以提供更简单的 deb 软件包安装方式 @Ghost-chu
  - 为 PeerBanHelper 启动添加预启动页面，WebUI 端口在启动过程中将显示日志信息以便确认启动情况，并在启动结束后自动跳转 WebUI @Ghost-chu
  更改与优化
  - 移除了 ORMLite 并切换到 MyBatis-Plus 框架，引入 Flyway 代替原本的 SQL 升级脚本，并完全重构了数据库基础设施，以便提升性能并为复杂查询奠定基础 @Ghost-chu @Gaojianli @paulzzh @guohu7777
  - 取消了 -XX:SoftMaxHeapSize=386M 参数以改善在部分重度用户的设备上的 CPU 高使用情况 @Ghost-chu
  - 移除了部分不需要的 netty 组件以缩减安装包体积 @Ghost-chu
  - 修复了当 GeoIP 查询结果中对应 IP 地址没有国家/地区代码时，发生空指针异常的问题 @Ghost-chu
  - 优化了 BanWave 中因反复创建线程池引起的额外 CPU 占用问题 @Ghost-chu
  - 修复了 TranslationComponent 为空时可能引发文本翻译空指针错误的问题 @Gaojianli
  - 使用多线程加载功能模块，提高程序启动速度 @Ghost-chu
  - 后台任务修改为异步运行，提高了运行速度 @Gaojianli
  - 优化了 “数据透视->封禁日志” 页面数据的加载速度和 SQL 查询性能 @Ghost-chu
  - 大幅优化了 “数据透视->种子” 页面数据的加载速度和 SQL 查询性能 @Ghost-chu
  - 优化了 “数据透视->IP 查询”里访问日志和封禁日志选项卡数据的加载速度和 SQL 查询性能 @Ghost-chu
  - 优化了种群跟踪、Peer 分析服务、进度反作弊模块等使用 TorrentService 的整体性能和缓存设计 @Ghost-chu
  - 大幅优化了 “统计->图表” 中的图表及其数据加载速度和 SQL 查询性能，特别是在长时间运行或存在大量任务的安装上 @Ghost-chu
  - PortMapper 现在使用虚拟线程以优化性能 @Ghost-chu
  - 新增种子缓存功能，以大幅改善各封禁模块的整体性能，减少磁盘 I/O @Ghost-chu
  - Docker 镜像包含 udev 软件包 @Gaojianli
  错误修复
  - 修复了当功能模块没有注册事件监听器时，在退出阶段报告 java.lang.IllegalArgumentException: missing event subscriber for a n annotated method. 的错误 @Ghost-chu
  - 修复 Transmission 下载器出现 IO 错误时，被错误的捕获为内部错误并处理的问题 @Ghost-chu
  - 修复内存不足的情况下 ProgressCheatBlocker 和其它模块的内存缓存可能在逐出条目的时候报告空指针错误 @Ghost-chu
  - 实验性修复了当下载器流量统计数据回溯/清零时，PBH 的流量统计数据可能出现问题的错误 @paulzzh
  - 移除了意外引入的 Install4j 的 output.log 重定向功能，该功能可能导致非预期的大量磁盘空间占用 @Ghost-chu
  - 修复若升级时，用户拒绝了卸载程序的 UAC 权限请求，则可能导致安装损坏的问题 @Ghost-chu
  - 修复了当 PeerBanHelper 启动时，大量长查询计划清理任务争夺连接，引发的急剧性能下降和 [SQLITE_BUSY] database is locked 错误 @Ghost-chu
  隐私政策透明度
  在本版本中新增了遥测功能，以便开发者收集产生的错误和崩溃日志。相关信息用于且仅用于改善软件质量，所有相关数据均在 PBH-BTN 的服务器上处理和保存，不会出售、转移给第三方。
  您可以随时在 “设置-基本设置-启用遥测” 菜单禁用此功能。
  有关信息收集范围和如何退出请 点击此处 以了解相关更改。
  Docker
  DockerHub: ghostchu/peerbanhelper:v9.3.0
  阿里云镜像加速：registry.cn-hangzhou.aliyuncs.com/ghostchu/peerbanhelper:v9.3.0
  部署教程 | 常见问题 | 如何设置下载器
ReleaseNotesUrl: https://github.com/PBH-BTN/PeerBanHelper/releases/tag/v9.3.0
Documentations:
- DocumentLabel: Wiki
  DocumentUrl: https://github.com/PBH-BTN/PeerBanHelper/wiki
ManifestType: defaultLocale
ManifestVersion: 1.12.0
