# Created with YamlCreate.ps1 Dumplings Mod
# yaml-language-server: $schema=https://aka.ms/winget-manifest.defaultLocale.1.12.0.schema.json

PackageIdentifier: PBH-BTN.PeerBanHelper
PackageVersion: 9.3.5
PackageLocale: zh-CN
Publisher: PBH-BTN Community
PublisherUrl: https://github.com/PBH-BTN
PublisherSupportUrl: https://github.com/PBH-BTN/PeerBanHelper/issues
PackageName: PeerBanHelper
PackageUrl: https://github.com/PBH-BTN/PeerBanHelper
License: GPL-3.0
LicenseUrl: https://github.com/PBH-BTN/PeerBanHelper/blob/HEAD/LICENSE
ShortDescription: 自动封禁不受欢迎、吸血和异常的 BT 客户端，并支持自定义规则。
Tags:
- bt
- 种子
ReleaseNotes: |-
  [!TIP]
  新年快乐，阖家团圆！祝所有 BTer 农历马年新年快乐！
  [!TIP]
  【Synology DSM】群晖用户请注意，由于原合作套件源矿神-SPK7 软件源计划停止服务，版本更新速度可能受影响且将在未来将关闭站点。请您添加 PBH-BTN SPK 源，以接替原矿神 SPK 源并继续通过套件中心获取更新：https://spk-repo.pbh-btn.com/nas 谢谢！
  下载器兼容性
  - 添加 qBittorrent 的 IP 段封禁支持，以便增强对 IPV6 Freebind 行为（随机后缀）的封禁能力。需要 qBittorrent v5.3.0 或者更高版本，亦或者补丁版本 @Ghost-chu @KagurazakaNyaa
    - 官方将在 v5.3.0 中包含此新功能；在此之前，带有补丁的特殊版本可以从下面的位置下载：
    - Windows: https://github.com/qbittorrent/qBittorrent/actions/runs/22053061907
    - Linux: https://github.com/qbittorrent/qBittorrent/actions/runs/22053061908
    - MacOS: https://github.com/qbittorrent/qBittorrent/actions/runs/22053061910
    - 使用支持 IP 段封禁的 qBittorrent 构建后，随机 IPV6 后缀的 Peer 不再需要使用防火墙进行额外处理
  更改
  - 为了更好匹配当前时间的反吸血情况，IPV6 封禁列表重映射范围已从 /60 提升到 /52 @Ghost-chu
  错误修复
  1. 禁用退出时 SQLite VACUUM。因为如果 VACUUM 未在指定时间内完成而导致进程被杀死，则可能导致数据库损坏 @Ghost-chu
  2. 修正 Transmission 活动种子的判定条件 @Ghost-chu
  3. 修正当 Transmission 报告 409 错误时，请求会直接失败而不是刷新 CORS Token 后重试 @Ghost-chu
  4. 修正对下载失败的 MMDB 的错误处理，现在 MMDB 损坏时，将计划退出时删除，并在下次启动时重新下载 MMDB @Ghost-chu
  5. 修正 PeerConnectionMetricsTrackMapper 有关的 SQL 查询唯一约束错误有关的问题 @Ghost-chu
  6. 修正 TcpStunClient 在极特殊情况下退出行为不正确的问题 @paulzzh
  7. 修复多个队列的线程安全问题 @Ghost-chu
  Docker
  DockerHub: ghostchu/peerbanhelper:v9.3.5
  阿里云国内镜像加速：registry.cn-hangzhou.aliyuncs.com/ghostchu/peerbanhelper:v9.3.5

  部署教程 | 常见问题 | 如何设置下载器
ReleaseNotesUrl: https://github.com/PBH-BTN/PeerBanHelper/releases/tag/v9.3.5
Documentations:
- DocumentLabel: Wiki
  DocumentUrl: https://github.com/PBH-BTN/PeerBanHelper/wiki
ManifestType: defaultLocale
ManifestVersion: 1.12.0
