# Created with YamlCreate.ps1 Dumplings Mod
# yaml-language-server: $schema=https://aka.ms/winget-manifest.defaultLocale.1.12.0.schema.json

PackageIdentifier: lbjlaq.AntigravityTools
PackageVersion: 4.1.11
PackageLocale: zh-CN
Publisher: lbjlaq
PublisherUrl: https://github.com/lbjlaq
PublisherSupportUrl: https://github.com/lbjlaq/Antigravity-Manager/issues
PackageName: Antigravity Tools
PackageUrl: https://github.com/lbjlaq/Antigravity-Manager
License: CC-BY-NC-SA-4.0
LicenseUrl: https://github.com/lbjlaq/Antigravity-Manager/blob/HEAD/LICENSE
ShortDescription: 专业的 Antigravity 账号管理与切换工具。为 Antigravity 提供一键无缝账号切换功能。
Description: |-
  Antigravity Tools 是一个专为开发者和 AI 爱好者设计的全功能桌面应用。它将多账号管理、协议转换和智能请求调度完美结合，为您提供一个稳定、极速且成本低廉的 本地 AI 中转站。
  通过本应用，您可以将常见的 Web 端 Session (Google/Anthropic) 转化为标准化的 API 接口，彻底消除不同厂商间的协议鸿沟。
ReleaseNotes: |-
  - [核心优化] 重构 Token 轮询逻辑 (High-End Model Routing Optimization):
    - 能力硬门槛：针对 claude-opus-4-6 等高端模型实施了严格的 Capability Filtering。系统现在会检查账号实际持有的 model_quotas，只有明确拥有目标模型配额的账号才能参与轮询，彻底解决了 Pro/Free 账号因 "Soft Priority" 而被错误选中的问题。
    - 严格层级优先：确立了 Ultra > Pro > Free 的绝对优先级排序策略。只要 Ultra 账号可用，系统将始终优先调度 Ultra 账号，防止降级到 Pro 账号，确保了高端模型的服务质量。
    - [配置警告]: 请检查 设置 -> 自定义模型映射 或 gui_config.json，确保没有配置 "claude-opus-4-*": "claude-opus-4-5-thinking" 这样的通配符，否则会导致 claude-opus-4-6-thinking 被错误映射到 claude-opus-4-5-thinking。建议为 claude-opus-4-6-thinking 添加明确的精确映射。
  - [核心修复] 修复配置热重载失效问题 (PR #1713):
    - 即时生效：修复了在 WebUI 或 Docker 环境下保存配置时，内存中的代理池配置未同步更新的问题。现在修改配置后无需重启即可立即生效。
  - [Docker 优化] 新增本地绑定限制选项：
    - 网络安全：新增 ABV_BIND_LOCAL_ONLY 环境变量。当设置为 true 时，Docker/Headless 模式将仅绑定 127.0.0.1，不再默认向 0.0.0.0 暴露服务，满足特定安全网络需求。
  - [核心功能] 用户 Token 支持自定义过期时间 (PR #1722):
    - 灵活控制：创建用户 Token 时现在支持选择精确到分钟的自定义过期时间，不再局限于预设的固定时长。
  - [核心修复] Token 编辑数据同步与参数封装 (PR #1720, #1722):
    - 数据同步：修复了编辑 Token 时部分字段数据未正确回显的问题。
    - 代码重构：优化了 Token 创建与更新的参数传递结构，提升了代码的可维护性。
  - [核心修复] 修复代理认证信息持久化失效问题 (Issue #1738):
    - 魔术前缀机制：引入 ag_enc_ 前缀来明确标识已加密的密码字段。
    - 双重加密防护：彻底解决了后端无法区分“用户输入的明文”与“已加密的密文”，导致在多次保存或导入导出时发生双重加密（Double Encryption）的问题。
    - 兼容性：完美兼容旧版配置（无前缀），并在下次保存时自动迁移到新格式。同时增强了批量导入功能的健壮性。
  - [核心修复] 解决用户创建/加载失败问题 (Issue #1719):
    - 数据清洗：在数据库初始化阶段增加了针对旧数据的清洗逻辑，自动将 NULL 值重置为默认值，修复了因字段缺失导致的列表接口崩溃。
    - 鲁棒性增强：优化了后端数据读取逻辑，为关键字段增加了防御性默认值处理。
  - [前端修复] 修复用户 Token 续期功能失效：
    - 参数修正：修正了续期接口调用时的参数命名风格 (snake_case → camelCase)，解决了 "missing required key" 报错。
  - [核心修复] 彻底解决 Google Cloud 项目 404 错误 (Issue #1736):
    - 移除无效 Mock 逻辑：彻底删除了随机生成 Project ID 的失效逻辑（如 useful-flow-g3dts），此类 ID 目前会被 Google API 拦截并返回 404。
    - 智能兜底策略：现在当账号无法自动获取项目 ID 时，系统会安全回退到经验证长期有效的稳定 Project ID bamboo-precept-lgxtn，确保 API 请求的连续性与稳定性。
  - [核心修复] 增强网络环境下的流式传输稳定性 (Issue #1732):
    - 强制缓冲区冲刷 (Flush): 解决了在不稳定网络环境下，SSE 流因缺少末尾换行符而导致的对话挂起及 "IO 为 0" 问题。
    - 超时容错增强：将流式响应超时时间延长至 60s，有效对抗高延迟网络引发的异常中断。
    - Session ID 稳定性优化：改进了会话标识生成算法，防止网络重连后的 ID 漂移及其引发的思维模型签名失效。
ReleaseNotesUrl: https://github.com/lbjlaq/Antigravity-Manager/releases/tag/v4.1.11
ManifestType: defaultLocale
ManifestVersion: 1.12.0
