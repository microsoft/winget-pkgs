# Created with YamlCreate.ps1 Dumplings Mod
# yaml-language-server: $schema=https://aka.ms/winget-manifest.defaultLocale.1.12.0.schema.json

PackageIdentifier: lbjlaq.AntigravityTools
PackageVersion: 4.1.13
PackageLocale: zh-CN
Publisher: lbjlaq
PublisherUrl: https://github.com/lbjlaq
PublisherSupportUrl: https://github.com/lbjlaq/Antigravity-Manager/issues
PackageName: Antigravity Tools
PackageUrl: https://github.com/lbjlaq/Antigravity-Manager
License: CC-BY-NC-SA-4.0
LicenseUrl: https://github.com/lbjlaq/Antigravity-Manager/blob/HEAD/LICENSE
ShortDescription: 专业的 Antigravity 账号管理与切换工具。为 Antigravity 提供一键无缝账号切换功能。
Description: |-
  Antigravity Tools 是一个专为开发者和 AI 爱好者设计的全功能桌面应用。它将多账号管理、协议转换和智能请求调度完美结合，为您提供一个稳定、极速且成本低廉的 本地 AI 中转站。
  通过本应用，您可以将常见的 Web 端 Session (Google/Anthropic) 转化为标准化的 API 接口，彻底消除不同厂商间的协议鸿沟。
ReleaseNotes: |-
  - [核心功能] Homebrew Cask 安装检测与支持 (PR #1673):
    - 应用升级：新增了对 Homebrew Cask 安装的检测逻辑。如果应用是通过 Cask 安装的，现在可以直接在应用内触发 brew upgrade --cask 流程，实现无缝升级体验。
  - [核心修复] Gemini 图像生成配额保护 (PR #1764):
    - 保护生效：修复了配额保护机制可能会错误统计文本请求的问题，并确保在绘图配额耗尽时能正确拦截 gemini-3-pro-image 的请求。
  - [UI 优化] 修复导航栏边界与显示问题 (PR #1636):
    - 边界修复：修复了导航栏右侧菜单在特定窗口宽度下可能超出边界或显示不全的问题。
    - 兼容性：此次合并保留了主分支上的 Mini View 等新特性，只应用了必要的样式修正。
  - [UI 优化] 修复英文模式下的布局溢出与水平滚动 (Issue #1783):
    - 全局限制：在全局样式中封锁了水平轴溢出，杜绝了因文字过长导致的页面横向抖动。
    - 响应式增强：优化了导航栏断点，将文字胶囊的显示阈值提高至 1120px，确保长英文标签在窄窗口下自动切换为图标模式，保持布局整洁。
  - [核心修复] 修复处理复杂 JSON Schema 时可能发生的栈溢出问题 (Issue #1781):
    - 安全加固：为 flatten_refs 等深度递归逻辑引入了 MAX_RECURSION_DEPTH (10) 限制，有效防止了由循环引用或过深嵌套导致的程序崩溃。
  - [核心修复] 修复流式输出下多个工具调用被错误拼接的问题 (Issue #1786):
    - 索引校正：修正了 create_openai_sse_stream 中 tool_calls 的索引分配逻辑，确保同一个 chunk 中的多个工具调用拥有独立且连续的 index，避免了参数被错误拼接导致解析失败的现象。
  - [核心修复] 修复 Claude Thinking 模型多轮对话时的签名错误 (Issue #1790):
    - 签名注入与降级：在 OpenAI 协议转换层中增加了对历史消息思考块签名的自动注入逻辑。当无法获取有效签名时，自动将其降级为普通文本块，从而解决了 Claude-opus-thinking 等模型在多轮对话中因签名缺失导致的 HTTP 400 错误。
  - [核心修复] 修复 Google Cloud 项目 ID 获取失败导致的 503 错误 (Issue #1794):
    - 增加兜底：修复了由于账号权限导致无法获取官方项目 ID 时会跳过该账号的 Bug。现在系统会自动回退到经验证稳定的通用 Project ID (bamboo-precept-lgxtn)，确保 API 请求的连续性。
  - [i18n] 完善 Settings 与 ApiProxy 国际化支持 (PR #1789):
    - 重构：将 Settings.tsx 和 ApiProxy.tsx 中硬编码的中文字符串替换为 t() 国际化调用。
    - 翻译补全：同步更新了韩语、缅甸语、葡萄牙语、俄语、土耳其语、越南语、繁体中文和简体中文的本地化词条。
  - [核心修复] 修复 IP 白名单删除失败问题 (Issue #1797):
    - 参数规范化：修复了由于前端与后端参数命名风格 (snake_case vs camelCase) 不一致导致无法删除白名单 IP 的问题。同时统一了黑名单管理与 IP 访问日志的相关参数，确保全系统参数传递的一致性。
ReleaseNotesUrl: https://github.com/lbjlaq/Antigravity-Manager/releases/tag/v4.1.13
ManifestType: defaultLocale
ManifestVersion: 1.12.0
