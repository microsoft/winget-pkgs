# Created with YamlCreate.ps1 Dumplings Mod
# yaml-language-server: $schema=https://aka.ms/winget-manifest.defaultLocale.1.12.0.schema.json

PackageIdentifier: lbjlaq.AntigravityTools
PackageVersion: 4.1.16
PackageLocale: zh-CN
Publisher: lbjlaq
PublisherUrl: https://github.com/lbjlaq
PublisherSupportUrl: https://github.com/lbjlaq/Antigravity-Manager/issues
PackageName: Antigravity Tools
PackageUrl: https://github.com/lbjlaq/Antigravity-Manager
License: CC-BY-NC-SA-4.0
LicenseUrl: https://github.com/lbjlaq/Antigravity-Manager/blob/HEAD/LICENSE
ShortDescription: 专业的 Antigravity 账号管理与切换工具。为 Antigravity 提供一键无缝账号切换功能。
Description: |-
  Antigravity Tools 是一个专为开发者和 AI 爱好者设计的全功能桌面应用。它将多账号管理、协议转换和智能请求调度完美结合，为您提供一个稳定、极速且成本低廉的 本地 AI 中转站。
  通过本应用，您可以将常见的 Web 端 Session (Google/Anthropic) 转化为标准化的 API 接口，彻底消除不同厂商间的协议鸿沟。
ReleaseNotes: |-
  - [核心修复] 修复 Claude 协议 (Thinking 模型) 400 错误 (V4 方案):
    - 协议对齐：彻底修复了 Claude 3.7/4.5 Thinking 等模型在通过代理调用时因参数结构不匹配导致的 400 Invalid Argument 错误。
    - 统一注入：废弃了导致冲突的根目录 thinking 字段注入，现在统一使用 Google 原生协议推荐的 generationConfig.thinkingConfig 嵌套结构。
    - 预算适配：为 Claude 模型适配了默认 16k 的思考预算 (Thinking Budget)，并解决了 Rust 借用检查导致的编译与运行时异常。
  - [Bug 修复] 修复 OpenAI 流式响应 Usage 重复问题 (Issue #1915):
    - Token 爆炸修复：修复了在流式传输模式下 (stream=true)，usage 字段被错误地附加到每一个数据块 (Chunk) 中，导致客户端 (如 Cline/Roo Code) 统计的 Token 用量呈指数级虚高的问题。
  - [核心优化] 开启 Linux 平台原生自动更新支持 (PR #1891):
    - 全平台覆盖：在 updater.json 中增加了对 linux-x86_64 和 linux-aarch64 平台的支持，使 Linux AppImage 用户现在也能正常收到自动更新通知。
    - 发布流优化：自动匹配并读取 Linux 版本的 .AppImage.sig 签名文件，实现了 macOS、Windows 与 Linux 三大主流平台的自动更新能力闭环。
  - [新增功能] 跨平台一行命令安装脚本支持 (PR #1892):
    - 安装体验升级：新增 install.sh (Linux/macOS) 和 install.ps1 (Windows) 脚本，支持通过极简的 curl 或 irm 命令实现全自动下载、安装与环境配置。
    - 智能适配：脚本支持自动识别操作系统、架构、包管理器（DEB/RPM/AppImage/DMG/NSIS），并提供版本锁定与 Dry-Run 预览模式。
  - [核心优化] OpenCode 配置与本地二进制解耦及自定义网络支持 (Issue #1869):
    - 环境解耦：后端不再强制校验 opencode 二进制是否存在，允许在 Docker 等隔离环境下仅通过配置文件管理同步状态。
    - 自定义 BaseURL: 前端新增 "Custom Manager BaseURL" 设置，支持手动指定 Manager 访问地址，完美解决 Docker Compose 容器互联与自定义反代场景下的连接问题。
    - 完全本地化：为新功能补全了中、英双语 I18n 支持，并修复了 OpenCode 同步弹窗的 JSX 渲染异常。
  - [UI 修复] 修复 API 代理模板生成的 Python 代码缩进不一致问题 (PR #1879):
    - 显示优化：移除了 Python 集成示例代码块中多余的行首空格，确保从界面复制的代码可以直接运行，无需手动调整缩进。
  - [核心修复] 解决 Gemini 图像生成因关键词匹配导致的 effortLevel 冲突 (PR #1873):
    - 逻辑冲突修复：彻底修复了 gemini-3-pro-image 及其 4k/2k 变体因包含 gemini-3-pro 关键词，被系统错误判定为支持 Adaptive Thinking 从而误注入 effortLevel 导致的 HTTP 400 错误。
  - [文档更新] 发布 Gemini 3 Pro (Imagen 3) 图像生成全功能调用指南：
    - 深度指南：新增 Gemini 3 Pro 图像模型调用指南，详细说明了宽高比自动映射、画质等级对应关系图表，以及新增的图生图 (Image-to-Image) 与后缀魔法用法。
  - [安装优化] 官方 Homebrew Cask 维护与更新：
    - 版本同步：更新 antigravity-tools.rb Cask 配置至 v4.1.16，确保 macOS 与 Linux 用户通过 brew install 始终获取最新稳定版本。
    - 参数清洗：在代理请求层增加了对图像生成模型的特殊过滤，确保不再为非思维链模型注入不兼容的生成参数。
ReleaseNotesUrl: https://github.com/lbjlaq/Antigravity-Manager/releases/tag/v4.1.16
ManifestType: defaultLocale
ManifestVersion: 1.12.0
